<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>LAN969x Flashing and Debrick Instruction :: VelocityDRIVE-SP Documentation</title>
    <meta name="generator" content="Antora 3.1.9">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">VelocityDRIVE-SP Documentation</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="vd-docs" data-version="2025.03">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="doc-intro.html">Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="doc-intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="doc-getting-started.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="doc-cg-relnote.html">Release note</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="doc-cg.html">Configuration Guides</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Interface</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-if-naming.html">Naming</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-if-port.html">Port</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-if-qos.html">QoS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-if-aggr.html">Link aggregation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="doc-cg-l2.html">L2 Forwarding</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-l2-fdb.html">FDB</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-l2-vlan.html">VLAN</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-l2-mirror.html">Mirroring</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-l2-acl.html">ACL</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="doc-cg-l3.html">L3 Forwarding (routing)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">TSN</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-tsn-1588.html">PTP/IEEE1588</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-tsn-psfp.html">PSFP</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-mgmt-system.html">System</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-mgmt-ip.html">IP Based Management</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-mgmt-coap.html">Securing CoAP</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-mgmt-lldp.html">LLDP</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-mgmt-cy.html">CORECONF Yang</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-mgmt-fwup.html">Firmware update</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-cg-mgmt-hw.html">Hardware</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="_attachments/yang-catalog.html">Yang Catalog</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="doc-sw-packets.html">SW Packets</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="doc-sw-sbom.html">SBOM</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="doc-evb.html">EVBs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="doc-evb-lan966x.html">LAN966x EVB</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-evb-lan9662-ev09d37a.html">EVB-LAN9662-EndNode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-evb-lan966x-fw-files.html">FW File Types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-evb-lan966x-strapping.html">Strapping Modes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-evb-lan966x-debrick.html">Flashing and Debrick</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="doc-evb-lan969x.html">LAN969x EVBs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-evb-lan969x-ev23x71a.html">EVB-LAN9696-24port</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-evb-lan969x-ev09p11a.html">EVB-LAN9692-Auto (EV09P11A)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-evb-lan969x-ev89p81a.html">EVB-LAN9698-10port (EV89P81A)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-evb-lan969x-fw-files.html">FW File Types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="doc-evb-lan969x-strapping.html">Strapping Modes</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="doc-evb-lan969x-debrick.html">Flashing and Debrick</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="doc-tailor.html">SW Tailoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="doc-tailor-getting-started.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="doc-tailor-sw-variants.html">SW Variants</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="doc-tailor-boardconf.html">Board Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SW Debugging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="doc-dbg-trace.html">Trace</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Support tools</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="doc-sup-ct.html">VelocityDRIVE-CT</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="doc-sup-gh.html">Support Scripts</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Technology</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="doc-tech-mup1.html"><code>MUP1</code></a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="doc-tech-yang.html">YANG</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="doc-tech-cc.html">CORECONF</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Documentation</span>
    <span class="version">2025.03</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="doc-intro.html">Documentation</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="doc-intro.html">2025.03</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="doc-intro.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="doc-intro.html">Documentation</a></li>
    <li><a href="doc-evb.html">EVBs</a></li>
    <li><a href="doc-evb-lan969x.html">LAN969x EVBs</a></li>
    <li><a href="doc-evb-lan969x-debrick.html">Flashing and Debrick</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="3">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">LAN969x Flashing and Debrick Instruction</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>If VelocityDRIVE-SP is not capable of booting on a given board, then it may be
necessary to follow the "de-brick" procedure where the NOR flash is erased
and programmed with a new image. This can be done in a few different ways; this
page will describe the simplest method.</p>
</div>
<div class="paragraph">
<p>Before starting, make sure all of the following prerequisites are met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Physical access to the board</p>
</li>
<li>
<p>A USB-UART connection to a PC</p>
</li>
<li>
<p>A browser with serial port support (Edge or Chrome)</p>
</li>
<li>
<p>A firmware image file to be installed (see <a href="doc-sw-packets.html" class="xref page">SW Binary Packets</a> for
download instructions)</p>
</li>
<li>
<p>Access to the DIP switches</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_debrick_using_fwu_html"><a class="anchor" href="#_debrick_using_fwu_html"></a>1. Debrick using fwu.html</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The LAN969x SoC contains a ROM monitor which can be used to download a new
image over UART, and then write it to the NOR flash. The advantage of this
method is that it is simple to follow and does not require any special tools.</p>
</div>
<div class="paragraph">
<p>This method is described in the following sections.</p>
</div>
<div class="sect2">
<h3 id="_prepare_the_board"><a class="anchor" href="#_prepare_the_board"></a>1.1. Prepare the Board</h3>
<div class="paragraph">
<p>Toggle the Boot-Mode DIP switch into position <code>1011 (0xb)</code> to select the
high-speed monitor mode. The position of the DIP switch is shown here (the red
dots are added to the picture to make it easier to see):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/dip-11.jpg" alt="dip 11" width="150px">
</div>
</div>
<div class="paragraph">
<p>Once the DIP setting is done, reset or power on the board.</p>
</div>
</div>
<div class="sect2">
<h3 id="_open_fwu_html"><a class="anchor" href="#_open_fwu_html"></a>1.2. Open FWU.html</h3>
<div class="paragraph">
<p>To communicate with the board, the <a href="https://github.com/microchip-ung/arm-trusted-firmware/releases/download/v2.8.17-mchp1/fwu-lan969x_a0-release.html">fwu-lan969x_a0-release.html</a>
tool is used.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Follow the link to save the file to your PC.</p>
</li>
<li>
<p>Make sure to open the downloaded HTML file in either Chrome or Edge</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>These are the only browsers with UART support built-in.</p>
</li>
<li>
<p>If using Linux, make sure the user running Chrome has access to the
UART.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This only works if no other application/process is using the UART.
Therefore, make sure to close any terminal emulators and/or VelocityDRIVE-CT
which may open the UART.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You should now see a web page like the one below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/lan969x-debrick-fwu-connect.png" alt="lan969x debrick fwu connect" width="600px">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start by selecting the baud rate, and set this to 921600 baud per second.</p>
</li>
<li>
<p>Then select "Connect device"</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When selecting "Connect device" you should see a pop-up asking which UART device to
use. This should look like the image below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/lan969x-debrick-fwu-uart.png" alt="lan969x debrick fwu uart" width="600px">
</div>
</div>
<div class="paragraph">
<p>Select the one with "MCP2200" in its name, and hit connect.</p>
</div>
<div class="paragraph">
<p>At this point, the fwu tool is initialized and is ready for usage.</p>
</div>
</div>
<div class="sect2">
<h3 id="_download_and_bl2u"><a class="anchor" href="#_download_and_bl2u"></a>1.3. Download and BL2u</h3>
<div class="paragraph">
<p>The BL2u image is a second-stage image including the code needed to program the
NOR flash. This image is embedded in the HTML page; you just need to hit the
"Download BL2u" button as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/lan969x-debrick-fwu-bl2u-dl.png" alt="lan969x debrick fwu bl2u dl" width="600px">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_programming_the_flash_image"><a class="anchor" href="#_programming_the_flash_image"></a>1.4. Programming the Flash Image</h3>
<div class="paragraph">
<p>Once the BL2u image in the previous step is fully downloaded and loaded, the UI will
change a bit and should look like the screenshot below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/lan969x-debrick-fwu-upload.png" alt="lan969x debrick fwu upload" width="600px">
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
These steps will erase and program the NOR flash entirely; all
firmware and configuration on the board will be lost.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here are the required steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the "Incremental" tab</p>
</li>
<li>
<p>Choose "NOR Flash"</p>
</li>
<li>
<p>Choose the file to be programmed.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>This must be a 2MB <code>img</code> file.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click "Incremental Write Image".</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>A progress bar will be shown, it will go to 100% <em>a few times</em>. This is
because it is the incremental mode where the image is being uploaded in
chunks and written.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Once it has completed, make sure to close the HTML browser/tab as this is the
only way to disconnect the UART.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_booting_newly_programmed_image"><a class="anchor" href="#_booting_newly_programmed_image"></a>1.5. Booting Newly Programmed Image</h3>
<div class="paragraph">
<p>Finally, change the boot-mode DIP switch back to: <code>0100 (0x4)</code> or <code>0001 (0x1)</code>
to boot from the newly programmed NOR flash. Settings shown here:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Strap Value</th>
<th class="tableblock halign-left valign-top">DIP-Setting</th>
<th class="tableblock halign-left valign-top">LAN969x (A0)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0001 (0x1)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/dip-1.jpg" alt="dip 1" width="150px">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Default development boot mode for VelocityDRIVE-SP</strong><br>
Booting from SPI-NOR 25MHz mode <code>1-1-1</code><br>
BootROM traces activated on FlexCOM-0 in UART mode <code>115200 1N8</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0100 (0x4)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="_images/dip-4.jpg" alt="dip 4" width="150px">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Default boot mode for VelocityDRIVE-SP</strong><br>
Booting from SPI-NOR 25MHz mode <code>1-1-1</code><br>
BootROM traces disabled.<br>
VelocityDRIVE uses FlexCOM-0 in UART mode <code>115200 1N8</code>.<br></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  This page was built using <a href="https://antora.org">Antora</a>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
